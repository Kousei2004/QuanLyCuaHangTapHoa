<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import javafx.collections.*?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.*?>

<ScrollPane fitToWidth="true" prefHeight="1503.0" prefWidth="1344.0" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.da.controller.ShiftManagementController">
    <content>
        <VBox prefHeight="1495.0" prefWidth="1342.0" spacing="20" style="-fx-padding: 25; -fx-background-color: #FAFAFA;">

            <!-- Page Header -->
            <HBox alignment="CENTER_LEFT">
                <VBox spacing="5">
                    <Label style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #263238;" text="Quản lý ca làm việc" />
                    <Label style="-fx-font-size: 14px; -fx-text-fill: #607D8B;" text="Theo dõi ca làm việc, doanh thu và chấm công nhân viên" />
                </VBox>
                <Region HBox.hgrow="ALWAYS" />
            </HBox>

            <!-- Current Shift Info -->
            <HBox spacing="20">
                <!-- Ca hiện tại -->
                <VBox style="-fx-background-color: linear-gradient(to bottom right, #2196F3, #1976D2); -fx-padding: 30; -fx-background-radius: 15; -fx-effect: dropshadow(gaussian, rgba(33,150,243,0.3), 15, 0, 0, 5);" HBox.hgrow="ALWAYS">
                    <HBox alignment="CENTER_LEFT" spacing="20">
                        <StackPane>
                            <Circle fill="rgba(255,255,255,0.2)" radius="40" />
                            <ImageView fitHeight="50" fitWidth="50">
                                <image>
                                    <Image url="@../../../../icons/time.png" />
                                </image>
                            </ImageView>
                        </StackPane>
                        <VBox spacing="8">
                            <Label style="-fx-text-fill: rgba(255,255,255,0.9); -fx-font-size: 16px;" text="Ca hiện tại" />
                            <Label fx:id="lblCurrentShift" style="-fx-font-size: 32px; -fx-font-weight: bold; -fx-text-fill: white;" text="CA CHIỀU" />
                            <HBox spacing="15">
                                <Label style="-fx-text-fill: rgba(255,255,255,0.8);" text="Bắt đầu: 13:00" />
                                <Label style="-fx-text-fill: rgba(255,255,255,0.8);" text="Kết thúc: 21:00" />
                            </HBox>
                            <HBox alignment="CENTER_LEFT" spacing="10">
                                <Label style="-fx-text-fill: rgba(255,255,255,0.9);" text="Trạng thái:" />
                                <Label style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-padding: 3 10; -fx-background-radius: 12; -fx-font-weight: bold;" text="ĐANG MỞ" />
                            </HBox>
                        </VBox>
                    </HBox>
                </VBox>

                <!-- Thống kê ca hiện tại -->
                <VBox spacing="15">
                    <HBox spacing="15">

                        <!-- Doanh thu ca -->
                        <VBox style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 10, 0, 0, 3);" HBox.hgrow="ALWAYS">
                            <Label style="-fx-text-fill: #90A4AE; -fx-font-size: 13px;" text="Doanh Thu" />
                            <Label fx:id="lblShiftRevenue" style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #FF9800;" text="15.6M" />
                            <Label style="-fx-text-fill: #B0BEC5; -fx-font-size: 12px;" text="VNĐ" />
                        </VBox>
                    </HBox>

                    <HBox spacing="15">
                        <!-- Đơn hàng -->
                        <VBox prefHeight="118.0" prefWidth="145.0" style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 10, 0, 0, 3);" HBox.hgrow="ALWAYS">
                            <Label style="-fx-text-fill: #90A4AE; -fx-font-size: 13px;" text="Đơn hàng" />
                            <Label fx:id="lblShiftOrders" style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #9C27B0;" text="87" />
                            <Label style="-fx-text-fill: #B0BEC5; -fx-font-size: 12px;" text="Đơn" />
                        </VBox>
                    </HBox>
                </VBox>

                <!-- Quick Actions -->
                <VBox alignment="TOP_CENTER" spacing="10" />
            </HBox>

            <!-- Main Content TabPane -->
            <TabPane fx:id="shiftTabs" style="-fx-background-color: white; -fx-background-radius: 15;">
                <tabs>


                    <!-- Tab Doanh thu ca -->
                    <Tab closable="false" text="Doanh thu ca">
                        <content>
                            <VBox spacing="20" style="-fx-padding: 20;">
                                <!-- Revenue Summary -->
                                <HBox spacing="20">
                                    <VBox style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 10; -fx-border-color: #E0E0E0;" HBox.hgrow="ALWAYS">
                                        <Label style="-fx-font-weight: bold; -fx-text-fill: #607D8B;" text="TỔNG DOANH THU CA" />
                                        <Label fx:id="lblTotalRevenue" style="-fx-font-size: 32px; -fx-font-weight: bold; -fx-text-fill: #2196F3;" text="25,650,000 ₫" />
                                    </VBox>

                                    <VBox spacing="10" HBox.hgrow="ALWAYS">
                                        <HBox spacing="20">
                                            <VBox style="-fx-background-color: #E8F5E9; -fx-padding: 15; -fx-background-radius: 10;" HBox.hgrow="ALWAYS">
                                                <Label style="-fx-text-fill: #2E7D32;" text="Tiền mặt" />
                                                <Label fx:id="lblCashRevenue" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #4CAF50;" text="15,300,000 ₫" />
                                            </VBox>
                                            <VBox style="-fx-background-color: #E3F2FD; -fx-padding: 15; -fx-background-radius: 10;" HBox.hgrow="ALWAYS">
                                                <Label style="-fx-text-fill: #1565C0;" text="Chuyển khoản" />
                                                <Label fx:id="lblBankRevenue" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #2196F3;" text="10,350,000 ₫" />
                                            </VBox>
                                        </HBox>
                                    </VBox>
                                </HBox>

                                <!-- Revenue Details -->
                                <HBox spacing="20">
                                    <!-- Revenue by Category Chart -->
                                    <VBox style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 10; -fx-border-color: #E0E0E0;" HBox.hgrow="ALWAYS">
                                        <Label style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-padding: 0 0 10 0;" text="Doanh thu theo danh mục" />
                                        <PieChart fx:id="categoryRevenueChart" prefHeight="300" />
                                    </VBox>

                                    <!-- Top Products -->
                                    <VBox prefWidth="400" style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 10; -fx-border-color: #E0E0E0;">
                                        <Label style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-padding: 0 0 10 0;" text="Top sản phẩm bán chạy trong ca" />
                                        <VBox fx:id="topProductsList" spacing="10">
                                            <HBox alignment="CENTER_LEFT" style="-fx-background-color: #FAFAFA; -fx-padding: 10; -fx-background-radius: 5;">
                                                <Label style="-fx-font-weight: bold; -fx-text-fill: #2196F3; -fx-min-width: 25;" text="1" />
                                                <VBox HBox.hgrow="ALWAYS">
                                                    <Label style="-fx-font-weight: bold;" text="Cà phê sữa đá" />
                                                    <Label style="-fx-text-fill: #90A4AE; -fx-font-size: 12px;" text="45 ly" />
                                                </VBox>
                                                <Label style="-fx-font-weight: bold; -fx-text-fill: #4CAF50;" text="1,575,000 ₫" />
                                            </HBox>

                                            <HBox alignment="CENTER_LEFT" style="-fx-background-color: #FAFAFA; -fx-padding: 10; -fx-background-radius: 5;">
                                                <Label style="-fx-font-weight: bold; -fx-text-fill: #2196F3; -fx-min-width: 25;" text="2" />
                                                <VBox HBox.hgrow="ALWAYS">
                                                    <Label style="-fx-font-weight: bold;" text="Trà sữa truyền thống" />
                                                    <Label style="-fx-text-fill: #90A4AE; -fx-font-size: 12px;" text="32 ly" />
                                                </VBox>
                                                <Label style="-fx-font-weight: bold; -fx-text-fill: #4CAF50;" text="1,280,000 ₫" />
                                            </HBox>

                                            <HBox alignment="CENTER_LEFT" style="-fx-background-color: #FAFAFA; -fx-padding: 10; -fx-background-radius: 5;">
                                                <Label style="-fx-font-weight: bold; -fx-text-fill: #2196F3; -fx-min-width: 25;" text="3" />
                                                <VBox HBox.hgrow="ALWAYS">
                                                    <Label style="-fx-font-weight: bold;" text="Bánh mì thịt nướng" />
                                                    <Label style="-fx-text-fill: #90A4AE; -fx-font-size: 12px;" text="28 chiếc" />
                                                </VBox>
                                                <Label style="-fx-font-weight: bold; -fx-text-fill: #4CAF50;" text="980,000 ₫" />
                                            </HBox>
                                        </VBox>
                                    </VBox>
                                </HBox>

                                <!-- Transaction Table -->
                                <VBox VBox.vgrow="ALWAYS">
                                    <Label style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-padding: 0 0 10 0;" text="Chi tiết giao dịch" />
                                    <TableView fx:id="transactionTable" VBox.vgrow="ALWAYS">
                                        <columns>
                                            <TableColumn fx:id="colTime" prefWidth="100" text="Thời gian" />
                                            <TableColumn fx:id="colOrderCode" prefWidth="120" text="Mã đơn" />
                                            <TableColumn fx:id="colCustomer" prefWidth="200" text="Khách hàng" />
                                            <TableColumn fx:id="colProducts" prefWidth="300" text="Sản phẩm" />
                                            <TableColumn fx:id="colAmount" prefWidth="150" text="Thành tiền" />
                                            <TableColumn fx:id="colPaymentMethod" prefWidth="120" text="Phương thức" />
                                            <TableColumn fx:id="colCashier" prefWidth="150" text="Thu ngân" />
                                        </columns>
                                    </TableView>
                                </VBox>
                            </VBox>
                        </content>
                    </Tab>

                    <!-- Tab Kiểm kê tiền mặt -->
                    <Tab closable="false" text="Kiểm kê tiền mặt">
                        <content>
                            <VBox spacing="20" style="-fx-padding: 20;">
                                <!-- Cash Count Form -->
                                <HBox spacing="30">
                                    <!-- Denomination Input -->
                                    <VBox prefHeight="485.0" prefWidth="871.0" spacing="15" style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 10; -fx-border-color: #E0E0E0;" HBox.hgrow="ALWAYS">
                                        <Label style="-fx-font-size: 18px; -fx-font-weight: bold;" text="KIỂM ĐẾM TIỀN MẶT" />

                                        <GridPane hgap="15" vgap="10">
                                            <!-- 500,000 VND -->
                                            <Label style="-fx-font-weight: bold;" text="500,000 ₫" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                                            <TextField fx:id="txt500k" onKeyReleased="#calculateCashTotal" prefWidth="80" promptText="0" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                                            <Label text="x" GridPane.columnIndex="2" GridPane.rowIndex="0" />
                                            <Label fx:id="lbl500kTotal" minWidth="120" style="-fx-text-fill: #607D8B;" text="0 ₫" GridPane.columnIndex="3" GridPane.rowIndex="0" />

                                            <!-- 200,000 VND -->
                                            <Label style="-fx-font-weight: bold;" text="200,000 ₫" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                                            <TextField fx:id="txt200k" onKeyReleased="#calculateCashTotal" prefWidth="80" promptText="0" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                                            <Label text="x" GridPane.columnIndex="2" GridPane.rowIndex="1" />
                                            <Label fx:id="lbl200kTotal" minWidth="120" style="-fx-text-fill: #607D8B;" text="0 ₫" GridPane.columnIndex="3" GridPane.rowIndex="1" />

                                            <!-- 100,000 VND -->
                                            <Label style="-fx-font-weight: bold;" text="100,000 ₫" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                                            <TextField fx:id="txt100k" onKeyReleased="#calculateCashTotal" prefWidth="80" promptText="0" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                                            <Label text="x" GridPane.columnIndex="2" GridPane.rowIndex="2" />
                                            <Label fx:id="lbl100kTotal" minWidth="120" style="-fx-text-fill: #607D8B;" text="0 ₫" GridPane.columnIndex="3" GridPane.rowIndex="2" />

                                            <!-- 50,000 VND -->
                                            <Label style="-fx-font-weight: bold;" text="50,000 ₫" GridPane.columnIndex="0" GridPane.rowIndex="3" />
                                            <TextField fx:id="txt50k" onKeyReleased="#calculateCashTotal" prefWidth="80" promptText="0" GridPane.columnIndex="1" GridPane.rowIndex="3" />
                                            <Label text="x" GridPane.columnIndex="2" GridPane.rowIndex="3" />
                                            <Label fx:id="lbl50kTotal" minWidth="120" style="-fx-text-fill: #607D8B;" text="0 ₫" GridPane.columnIndex="3" GridPane.rowIndex="3" />

                                            <!-- 20,000 VND -->
                                            <Label style="-fx-font-weight: bold;" text="20,000 ₫" GridPane.columnIndex="0" GridPane.rowIndex="4" />
                                            <TextField fx:id="txt20k" onKeyReleased="#calculateCashTotal" prefWidth="80" promptText="0" GridPane.columnIndex="1" GridPane.rowIndex="4" />
                                            <Label text="x" GridPane.columnIndex="2" GridPane.rowIndex="4" />
                                            <Label fx:id="lbl20kTotal" minWidth="120" style="-fx-text-fill: #607D8B;" text="0 ₫" GridPane.columnIndex="3" GridPane.rowIndex="4" />

                                            <!-- 10,000 VND -->
                                            <Label style="-fx-font-weight: bold;" text="10,000 ₫" GridPane.columnIndex="0" GridPane.rowIndex="5" />
                                            <TextField fx:id="txt10k" onKeyReleased="#calculateCashTotal" prefWidth="80" promptText="0" GridPane.columnIndex="1" GridPane.rowIndex="5" />
                                            <Label text="x" GridPane.columnIndex="2" GridPane.rowIndex="5" />
                                            <Label fx:id="lbl10kTotal" minWidth="120" style="-fx-text-fill: #607D8B;" text="0 ₫" GridPane.columnIndex="3" GridPane.rowIndex="5" />

                                            <!-- 5,000 VND -->
                                            <Label style="-fx-font-weight: bold;" text="5,000 ₫" GridPane.columnIndex="0" GridPane.rowIndex="6" />
                                            <TextField fx:id="txt5k" onKeyReleased="#calculateCashTotal" prefWidth="80" promptText="0" GridPane.columnIndex="1" GridPane.rowIndex="6" />
                                            <Label text="x" GridPane.columnIndex="2" GridPane.rowIndex="6" />
                                            <Label fx:id="lbl5kTotal" minWidth="120" style="-fx-text-fill: #607D8B;" text="0 ₫" GridPane.columnIndex="3" GridPane.rowIndex="6" />

                                            <!-- 2,000 VND -->
                                            <Label style="-fx-font-weight: bold;" text="2,000 ₫" GridPane.columnIndex="0" GridPane.rowIndex="7" />
                                            <TextField fx:id="txt2k" onKeyReleased="#calculateCashTotal" prefWidth="80" promptText="0" GridPane.columnIndex="1" GridPane.rowIndex="7" />
                                            <Label text="x" GridPane.columnIndex="2" GridPane.rowIndex="7" />
                                            <Label fx:id="lbl2kTotal" minWidth="120" style="-fx-text-fill: #607D8B;" text="0 ₫" GridPane.columnIndex="3" GridPane.rowIndex="7" />

                                            <!-- 1,000 VND -->
                                            <Label style="-fx-font-weight: bold;" text="1,000 ₫" GridPane.columnIndex="0" GridPane.rowIndex="8" />
                                            <TextField fx:id="txt1k" onKeyReleased="#calculateCashTotal" prefWidth="80" promptText="0" GridPane.columnIndex="1" GridPane.rowIndex="8" />
                                            <Label text="x" GridPane.columnIndex="2" GridPane.rowIndex="8" />
                                            <Label fx:id="lbl1kTotal" minWidth="120" style="-fx-text-fill: #607D8B;" text="0 ₫" GridPane.columnIndex="3" GridPane.rowIndex="8" />

                                            <!-- 500 VND -->
                                            <Label style="-fx-font-weight: bold;" text="500 ₫" GridPane.columnIndex="0" GridPane.rowIndex="9" />
                                            <TextField fx:id="txt500" onKeyReleased="#calculateCashTotal" prefWidth="80" promptText="0" GridPane.columnIndex="1" GridPane.rowIndex="9" />
                                            <Label text="x" GridPane.columnIndex="2" GridPane.rowIndex="9" />
                                            <Label fx:id="lbl500Total" minWidth="120" style="-fx-text-fill: #607D8B;" text="0 ₫" GridPane.columnIndex="3" GridPane.rowIndex="9" />

                                            <!-- 200 VND -->
                                            <Label style="-fx-font-weight: bold;" text="200 ₫" GridPane.columnIndex="0" GridPane.rowIndex="10" />
                                            <TextField fx:id="txt200" onKeyReleased="#calculateCashTotal" prefWidth="80" promptText="0" GridPane.columnIndex="1" GridPane.rowIndex="10" />
                                            <Label text="x" GridPane.columnIndex="2" GridPane.rowIndex="10" />
                                            <Label fx:id="lbl200Total" minWidth="120" style="-fx-text-fill: #607D8B;" text="0 ₫" GridPane.columnIndex="3" GridPane.rowIndex="10" />
                                 <columnConstraints>
                                    <ColumnConstraints />
                                    <ColumnConstraints />
                                    <ColumnConstraints />
                                    <ColumnConstraints />
                                 </columnConstraints>
                                 <rowConstraints>
                                    <RowConstraints />
                                    <RowConstraints />
                                    <RowConstraints />
                                    <RowConstraints />
                                    <RowConstraints />
                                    <RowConstraints />
                                    <RowConstraints />
                                    <RowConstraints />
                                    <RowConstraints />
                                    <RowConstraints />
                                    <RowConstraints />
                                 </rowConstraints>
                                        </GridPane>

                                        <Separator />

                                        <HBox alignment="CENTER_LEFT">
                                            <Label style="-fx-font-weight: bold; -fx-font-size: 16px;" text="TỔNG TIỀN MẶT THỰC TẾ:" />
                                            <Region HBox.hgrow="ALWAYS" />
                                            <Label fx:id="lblActualCashTotal" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2196F3;" text="0 ₫" />
                                        </HBox>

                                        <HBox alignment="CENTER" spacing="10">
                                            <Button fx:id="btnCalculateTotal" onAction="#calculateCashTotal" style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-cursor: hand;" text="Tính tổng" />
                                            <Button fx:id="btnClearCash" onAction="#clearCashCount" style="-fx-background-color: #757575; -fx-text-fill: white; -fx-cursor: hand;" text="Xóa tất cả" />
                                        </HBox>
                                    </VBox>

                                    <!-- Cash Summary -->
                                    <VBox prefWidth="350" spacing="15" style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 10; -fx-border-color: #E0E0E0;">
                                        <Label style="-fx-font-size: 18px; -fx-font-weight: bold;" text="KIỂM TRA TIỀN MẶT" />

                                        <VBox spacing="10">
                                            <HBox alignment="CENTER_LEFT">
                                                <Label style="-fx-font-weight: bold;" text="Tiền mặt theo hệ thống:" />
                                                <Region HBox.hgrow="ALWAYS" />
                                                <Label fx:id="lblSystemCash" style="-fx-font-weight: bold; -fx-text-fill: #607D8B;" text="25,350,000 ₫" />
                                            </HBox>

                                            <HBox alignment="CENTER_LEFT">
                                                <Label style="-fx-font-weight: bold;" text="Tiền mặt thực tế:" />
                                                <Region HBox.hgrow="ALWAYS" />
                                                <Label fx:id="lblActualCash" style="-fx-font-weight: bold; -fx-text-fill: #2196F3;" text="0 ₫" />
                                            </HBox>

                                            <Separator />

                                            <HBox alignment="CENTER_LEFT">
                                                <Label style="-fx-font-weight: bold; -fx-font-size: 16px;" text="CHÊNH LỆCH:" />
                                                <Region HBox.hgrow="ALWAYS" />
                                                <Label fx:id="lblCashDifference" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #FF5722;" text="0 ₫" />
                                            </HBox>
                                        </VBox>

                                        <Separator />

                                        <VBox spacing="10">
                                            <Label style="-fx-font-weight: bold;" text="Ghi chú kiểm kê:" />
                                            <TextArea fx:id="txtCashNote" prefRowCount="4" promptText="Nhập ghi chú về việc kiểm kê tiền mặt..." />
                                        </VBox>

                                        <HBox alignment="CENTER" spacing="10">
                                            <Button fx:id="btnSaveCashCount" onAction="#saveCashCount" style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-cursor: hand; -fx-font-weight: bold;" text="Lưu kiểm kê" />
                                            <Button fx:id="btnPrintCashReport" onAction="#printCashReport" style="-fx-background-color: #FF9800; -fx-text-fill: white; -fx-cursor: hand;" text="In báo cáo" />
                                        </HBox>
                                    </VBox>
                                </HBox>

                                <!-- Cash History -->
                                <VBox VBox.vgrow="ALWAYS">
                                    <Label style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-padding: 0 0 10 0;" text="Lịch sử kiểm kê" />
                                    <TableView fx:id="cashHistoryTable" VBox.vgrow="ALWAYS">
                                        <columns>
                                            <TableColumn fx:id="colCashCheckTime" prefWidth="150" text="Thời gian" />
                                            <TableColumn fx:id="colCashChecker" prefWidth="150" text="Người kiểm kê" />
                                            <TableColumn fx:id="colSystemAmount" prefWidth="150" text="Tiền hệ thống" />
                                            <TableColumn fx:id="colActualAmount" prefWidth="150" text="Tiền thực tế" />
                                            <TableColumn fx:id="colDifference" prefWidth="150" text="Chênh lệch" />
                                            <TableColumn fx:id="colCashNote" prefWidth="300" text="Ghi chú" />
                                            <TableColumn fx:id="colCashStatus" prefWidth="100" text="Trạng thái" />
                                        </columns>
                                    </TableView>
                                </VBox>
                            </VBox>
                        </content>
                    </Tab>

                    <!-- Tab Lịch sử ca làm việc -->
                    <Tab closable="false" text="Lịch sử ca làm việc">
                        <content>
                            <VBox spacing="20" style="-fx-padding: 20;">
                                <!-- Filter Section -->
                                <HBox alignment="CENTER_LEFT" spacing="15">
                                    <Label style="-fx-font-weight: bold;" text="Lọc theo:" />
                                    <DatePicker fx:id="dpFromDate" promptText="Từ ngày" />
                                    <Label text="đến" />
                                    <DatePicker fx:id="dpToDate" promptText="Đến ngày" />
                                    <ComboBox fx:id="cbShiftFilter" prefWidth="120" promptText="Tất cả ca">
                                        <items>
                                            <FXCollections fx:factory="observableArrayList">
                                                <String fx:value="Tất cả ca" />
                                                <String fx:value="Ca sáng" />
                                                <String fx:value="Ca chiều" />
                                                <String fx:value="Ca tối" />
                                            </FXCollections>
                                        </items>
                                    </ComboBox>
                                    <ComboBox fx:id="cbManagerFilter" prefWidth="150" promptText="Tất cả quản lý" />
                                    <Button fx:id="btnFilterShifts" onAction="#filterShiftHistory" style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-cursor: hand;" text="Lọc" />
                                    <Button fx:id="btnExportShifts" onAction="#exportShiftHistory" style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-cursor: hand;" text="Xuất Excel" />
                                </HBox>

                                <!-- Shift History Table -->
                                <TableView fx:id="shiftHistoryTable" VBox.vgrow="ALWAYS">
                                    <columns>
                                        <TableColumn fx:id="colShiftDate" prefWidth="100" text="Ngày" />
                                        <TableColumn fx:id="colShiftName" prefWidth="100" text="Ca làm việc" />
                                        <TableColumn fx:id="colShiftStart" prefWidth="100" text="Giờ bắt đầu" />
                                        <TableColumn fx:id="colShiftEnd" prefWidth="100" text="Giờ kết thúc" />
                                        <TableColumn fx:id="colShiftManager" prefWidth="150" text="Quản lý ca" />
                                        <TableColumn fx:id="colEmployeeCount" prefWidth="100" text="Số NV" />
                                        <TableColumn fx:id="colShiftRevenueTbl" prefWidth="150" text="Doanh thu" />
                                        <TableColumn fx:id="colOrderCount" prefWidth="100" text="Số đơn" />
                                        <TableColumn fx:id="colCashAmount" prefWidth="150" text="Tiền mặt" />
                                        <TableColumn fx:id="colCashDifference" prefWidth="150" text="Chênh lệch" />
                                        <TableColumn fx:id="colShiftStatus" prefWidth="100" text="Trạng thái" />
                                        <TableColumn fx:id="colShiftActions" prefWidth="100" text="Thao tác" />
                                    </columns>
                                </TableView>

                                <!-- Statistics Summary -->
                                <HBox spacing="20" style="-fx-background-color: #F5F5F5; -fx-padding: 15; -fx-background-radius: 10;">
                                    <VBox alignment="CENTER" HBox.hgrow="ALWAYS">
                                        <Label style="-fx-text-fill: #607D8B; -fx-font-size: 12px;" text="Tổng ca làm việc" />
                                        <Label fx:id="lblTotalShifts" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2196F3;" text="0" />
                                    </VBox>

                                    <VBox alignment="CENTER" HBox.hgrow="ALWAYS">
                                        <Label style="-fx-text-fill: #607D8B; -fx-font-size: 12px;" text="Tổng doanh thu" />
                                        <Label fx:id="lblTotalShiftRevenue" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #4CAF50;" text="0 ₫" />
                                    </VBox>

                                    <VBox alignment="CENTER" HBox.hgrow="ALWAYS">
                                        <Label style="-fx-text-fill: #607D8B; -fx-font-size: 12px;" text="Trung bình/ca" />
                                        <Label fx:id="lblAverageRevenue" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #FF9800;" text="0 ₫" />
                                    </VBox>

                                    <VBox alignment="CENTER" HBox.hgrow="ALWAYS">
                                        <Label style="-fx-text-fill: #607D8B; -fx-font-size: 12px;" text="Tổng đơn hàng" />
                                        <Label fx:id="lblTotalOrders" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #9C27B0;" text="0" />
                                    </VBox>
                                </HBox>
                            </VBox>
                        </content>
                    </Tab>

                    <!-- Tab Báo cáo ca -->
                    <Tab closable="false" text="Báo cáo ca">
                        <content>
                            <VBox spacing="20" style="-fx-padding: 20;">
                                <!-- Report Header -->
                                <HBox alignment="CENTER_LEFT" spacing="20">
                                    <VBox spacing="5">
                                        <Label style="-fx-font-size: 20px; -fx-font-weight: bold;" text="BÁO CÁO CA LÀM VIỆC" />
                                        <Label fx:id="lblReportDate" style="-fx-text-fill: #607D8B;" text="Ca chiều - Ngày 19/06/2025" />
                                    </VBox>
                                    <Region HBox.hgrow="ALWAYS" />
                                    <Button fx:id="btnGenerateReport" onAction="#generateShiftReport" style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-cursor: hand; -fx-font-weight: bold;" text="Tạo báo cáo" />
                                    <Button fx:id="btnPrintReport" onAction="#printShiftReport" style="-fx-background-color: #FF9800; -fx-text-fill: white; -fx-cursor: hand;" text="In báo cáo" />
                                </HBox>

                                <!-- Report Content -->
                                <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS">
                                    <VBox fx:id="reportContent" spacing="20" style="-fx-background-color: white; -fx-padding: 30; -fx-background-radius: 10;">

                                        <!-- Shift Summary -->
                                        <VBox spacing="15">
                                            <Label style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #263238;" text="1. THÔNG TIN CA LÀM VIỆC" />

                                            <GridPane hgap="20" style="-fx-padding: 10;" vgap="10">
                                                <Label style="-fx-font-weight: bold;" text="Tên ca:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                                                <Label fx:id="lblReportShiftName" text="Ca chiều" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                                                <Label style="-fx-font-weight: bold;" text="Thời gian:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                                                <Label fx:id="lblReportShiftTime" text="13:00 - 21:00" GridPane.columnIndex="1" GridPane.rowIndex="1" />

                                                <Label style="-fx-font-weight: bold;" text="Quản lý ca:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                                                <Label fx:id="lblReportManager" text="Nguyễn Văn Manager" GridPane.columnIndex="1" GridPane.rowIndex="2" />

                                                <Label style="-fx-font-weight: bold;" text="Số nhân viên:" GridPane.columnIndex="0" GridPane.rowIndex="3" />
                                                <Label fx:id="lblReportEmployeeCount" text="15 nhân viên" GridPane.columnIndex="1" GridPane.rowIndex="3" />
                                    <columnConstraints>
                                       <ColumnConstraints />
                                       <ColumnConstraints />
                                    </columnConstraints>
                                    <rowConstraints>
                                       <RowConstraints />
                                       <RowConstraints />
                                       <RowConstraints />
                                       <RowConstraints />
                                    </rowConstraints>
                                            </GridPane>
                                        </VBox>

                                        <Separator />

                                        <!-- Revenue Summary -->
                                        <VBox spacing="15">
                                            <Label style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #263238;" text="2. TỔNG KẾT DOANH THU" />

                                            <GridPane hgap="20" style="-fx-padding: 10;" vgap="10">
                                                <Label style="-fx-font-weight: bold;" text="Tổng doanh thu:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                                                <Label fx:id="lblReportTotalRevenue" style="-fx-text-fill: #2196F3; -fx-font-weight: bold;" text="25,650,000 ₫" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                                                <Label style="-fx-font-weight: bold;" text="Tiền mặt:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                                                <Label fx:id="lblReportCashRevenue" style="-fx-text-fill: #4CAF50;" text="15,300,000 ₫" GridPane.columnIndex="1" GridPane.rowIndex="1" />

                                                <Label style="-fx-font-weight: bold;" text="Chuyển khoản:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                                                <Label fx:id="lblReportBankRevenue" style="-fx-text-fill: #2196F3;" text="10,350,000 ₫" GridPane.columnIndex="1" GridPane.rowIndex="2" />

                                                <Label style="-fx-font-weight: bold;" text="Số đơn hàng:" GridPane.columnIndex="0" GridPane.rowIndex="3" />
                                                <Label fx:id="lblReportOrderCount" text="87 đơn" GridPane.columnIndex="1" GridPane.rowIndex="3" />

                                                <Label style="-fx-font-weight: bold;" text="Trung bình/đơn:" GridPane.columnIndex="0" GridPane.rowIndex="4" />
                                                <Label fx:id="lblReportAvgOrder" text="294,827 ₫" GridPane.columnIndex="1" GridPane.rowIndex="4" />
                                    <columnConstraints>
                                       <ColumnConstraints />
                                       <ColumnConstraints />
                                    </columnConstraints>
                                    <rowConstraints>
                                       <RowConstraints />
                                       <RowConstraints />
                                       <RowConstraints />
                                       <RowConstraints />
                                       <RowConstraints />
                                    </rowConstraints>
                                            </GridPane>
                                        </VBox>

                                        <Separator />

                                        <!-- Attendance Summary -->
                                        <VBox spacing="15">
                                            <Label style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #263238;" text="3. CHẤM CÔNG NHÂN VIÊN" />

                                            <TableView fx:id="reportAttendanceTable" prefHeight="200">
                                                <columns>
                                                    <TableColumn fx:id="colReportEmpId" prefWidth="100" text="Mã NV" />
                                                    <TableColumn fx:id="colReportEmpName" prefWidth="200" text="Họ tên" />
                                                    <TableColumn fx:id="colReportCheckIn" prefWidth="100" text="Check-in" />
                                                    <TableColumn fx:id="colReportCheckOut" prefWidth="100" text="Check-out" />
                                                    <TableColumn fx:id="colReportWorkHours" prefWidth="100" text="Giờ làm" />
                                                    <TableColumn fx:id="colReportNote" prefWidth="200" text="Ghi chú" />
                                                </columns>
                                            </TableView>
                                        </VBox>

                                        <Separator />

                                        <!-- Cash Count -->
                                        <VBox spacing="15">
                                            <Label style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #263238;" text="4. KIỂM KÊ TIỀN MẶT" />

                                            <GridPane hgap="20" style="-fx-padding: 10;" vgap="10">
                                                <Label style="-fx-font-weight: bold;" text="Tiền mặt theo hệ thống:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                                                <Label fx:id="lblReportSystemCash" text="25,350,000 ₫" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                                                <Label style="-fx-font-weight: bold;" text="Tiền mặt thực tế:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                                                <Label fx:id="lblReportActualCash" text="25,320,000 ₫" GridPane.columnIndex="1" GridPane.rowIndex="1" />

                                                <Label style="-fx-font-weight: bold;" text="Chênh lệch:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                                                <Label fx:id="lblReportCashDiff" style="-fx-text-fill: #F44336;" text="-30,000 ₫" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                                    <columnConstraints>
                                       <ColumnConstraints />
                                       <ColumnConstraints />
                                    </columnConstraints>
                                    <rowConstraints>
                                       <RowConstraints />
                                       <RowConstraints />
                                       <RowConstraints />
                                    </rowConstraints>
                                            </GridPane>
                                        </VBox>

                                        <Separator />

                                        <!-- Signature Section -->
                                        <HBox spacing="100" style="-fx-padding: 30 0;">
                                            <VBox alignment="CENTER" spacing="50" HBox.hgrow="ALWAYS">
                                                <Label style="-fx-font-weight: bold;" text="Quản lý ca" />
                                                <Label style="-fx-text-fill: #607D8B;" text="(Ký tên)" />
                                            </VBox>

                                            <VBox alignment="CENTER" spacing="50" HBox.hgrow="ALWAYS">
                                                <Label style="-fx-font-weight: bold;" text="Ngày ...../...../....." />
                                                <Label text="" />
                                            </VBox>

                                            <VBox alignment="CENTER" spacing="50" HBox.hgrow="ALWAYS">
                                                <Label style="-fx-font-weight: bold;" text="Giám đốc" />
                                                <Label style="-fx-text-fill: #607D8B;" text="(Ký tên, đóng dấu)" />
                                            </VBox>
                                        </HBox>
                                    </VBox>
                                </ScrollPane>
                            </VBox>
                        </content>
                    </Tab>
                </tabs>
            </TabPane>

            <!-- Footer Status -->
            <HBox alignment="CENTER_LEFT" spacing="20" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 10;">
                <Label fx:id="lblStatusMessage" style="-fx-text-fill: #4CAF50; -fx-font-weight: bold;" text="Hệ thống đang hoạt động bình thường" />
                <Region HBox.hgrow="ALWAYS" />
                <Label fx:id="lblLastUpdate" style="-fx-text-fill: #607D8B;" text="Cập nhật lần cuối: 14:30:25" />
            </HBox>
        </VBox>
    </content>
</ScrollPane>
